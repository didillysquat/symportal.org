<!--TODO list:
implement drop down to change what category the x axis is annotated with
Implement the sample viewer when clicking on the sample, should show the stats for the sample i.e. contigs
post med pre med this kind of thing, but put the metadata first
Then also have a network window for when the sample is clicked on (this can be later)
Implement the profiles window. Maybe put these in collapsable cards
Implement the buttons on the plot so that it can be adjusted. make these independent for each plot-->

<!--IDEAS
Have a button that fixes scrolling so that the two plot track each other.
Also have a modal that is 'side-by-side' that will allow the sqeuences and profiles to be on the same plot with the
sequencs above and profiles below.-->
<!doctype html>
<html lang="en">
<meta charset="UTF-8">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" href="play_around.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="d3-tip.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>SymPortal DataSet results</title>
</head>
<body>

<!--TODO put in a shadow on the nav bar-->
<nav class="navbar bg-light navbar-expand-sm" style="border-bottom: 1px solid rgb(243,243,243);">

    <!--To the left-->
    <ul class="navbar-nav mr-auto">
        <a class="navbar-brand">
            <img src="images/greyscale_alt1.svg" alt="Logo" style="width:40px;">
        </a>
        <!--This should be the data set header that we are working with-->
        <p class="nav navbar-text">SymPortal Explorer: Restrepo et al. 2019</p>
    </ul>

    <!--To the right-->
    <ul class="navbar-nav">

        <li class="nav-item">
            <a class="nav-link">Home</a>
        </li>
    </ul>
</nav>


<!--MAIN CONTENT-->
<div class="row m-5">
    <!--LHS-->
    <div class="col-md-7">
        <!--Title of the paper-->
        <h5 class="display-4" style="font-size:2rem;">This is going to the tile to a paper lets put in the one of Alejandros in here for the time being</h5>
        <!--Authors of the paper-->
        <div class="d-flex p-3" style="color:#777">
            <P>Author 1, Author2, Bamino. d. Hector, Senor Pulap. and Osacar Trunkey and more and more and more anad more and amorena dndfndn amoer</P>
        </div>

        <!--POST MED SVG HOLDER-->
        <div class="card mb-3">

            <div class="card-header d-inline-flex" data-toggle="collapse" data-target="#post_med_svg_collapse">
                <div class="mr-auto">Post-MED ITS2 sequences</div>


            </div>

            <div class="card-body p-0 collapse show" id="post_med_svg_collapse">
                <div class="bg-light p-2" >
                    <div class="d-flex">
                        <div class="btn-group btn-group-sm mr-auto" >
                            <button id="PostMEDRelDType" class="btn btn-light dtype-btn" data-data-type="post" style="padding:2px 4px;font-size:0.7rem;border:1px solid lightgrey">relative</button>
                            <button id="PostMEDAbsDType" class="btn btn-primary dtype-btn" data-data-type="post" style="padding:2px 4px;font-size:0.7rem;">absolute</button>
                            <div class="btn-group">
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="padding:2px 4px;font-size:0.7rem;">
                                   Sorted by:
                                </button>
                                <div class="dropdown-menu svg_sort_by" id="sort_by_post_med" style="padding:2px 4px;font-size:0.7rem;">
                                    <a class="dropdown-item" >sequencing depth</a>
                                    <a class="dropdown-item" >sequencing similarity</a>
                                    <a class="dropdown-item" >host</a>
                                    <a class="dropdown-item" >location</a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex viewer_link" data-toggle="modal" data-target="#seq-prof-modal">
                            <div class="">Open viewer</div>
                            <i class="material-icons">launch</i>
                        </div>
                        <!-- The Modal -->
                        <div class="modal fade" id="seq-prof-modal">
                            <div class="modal-dialog modal-xl">
                                <div class="modal-content">

                                    <!-- Modal body -->
                                    <div class="modal-body">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>

                                        <div class="bg-light p-2" >
                                            <div class="d-flex">
                                                <div class="btn-group btn-group-sm mr-auto" >
                                                    <button id="PostMEDRelDType" class="btn btn-light dtype-btn" data-data-type="post" style="padding:2px 4px;font-size:0.7rem;border:1px solid lightgrey">relative</button>
                                                    <button id="PostMEDAbsDType" class="btn btn-primary dtype-btn" data-data-type="post" style="padding:2px 4px;font-size:0.7rem;">absolute</button>
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="padding:2px 4px;font-size:0.7rem;">
                                                           Sorted by:
                                                        </button>
                                                        <div class="dropdown-menu svg_sort_by" id="sort_by_post_med" style="padding:2px 4px;font-size:0.7rem;">
                                                            <a class="dropdown-item" >sequencing depth</a>
                                                            <a class="dropdown-item" >sequencing similarity</a>
                                                            <a class="dropdown-item" >host</a>
                                                            <a class="dropdown-item" >location</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="p-1 overflow-auto text-center">
                                            <svg id="chart_post_med_modal" class="chart" width="650" height="400"></svg>
                                            <svg id="chart_profile_modal" class="chart" width="650" height="400"></svg>
                                        </div>
                                    </div>

                                    <!-- Modal footer -->
                                    <div class="modal-footer" style="font-size:0.5rem;display:block;">
                                        <div class="pb-2" style="border-bottom:1px solid lightgrey;">
                                            <span style="font-weight:bold;">Sample:</span>
                                            <span class="meta_sample_name">--</span>
                                            <span style="font-weight:bold;">UID:</span>
                                            <span class="meta_sample_uid">--</span>
                                            <span style="font-weight:bold;">Host</span>
                                            <span class="meta_sample_host">--</span>
                                            <span style="font-weight:bold;">Depth:</span>
                                            <span class="meta_sample_depth">--</span>
                                            <span style="font-weight:bold;">Lat:</span>
                                            <span class="meta_sample_lat">--</span>
                                            <span style="font-weight:bold;">Lon:</span>
                                            <span class="meta_sample_lon">--</span>
                                        </div>
                                        <div class="pt-2">
                                            <span style="font-weight:bold;">Profile:</span>
                                            <span class="meta_profile_name">--</span>
                                            <span style="font-weight:bold;">UID:</span>
                                            <span class="meta_profile_uid">--</span>
                                            <span style="font-weight:bold;">Host</span>
                                            <span class="meta_profile_host">--</span>
                                            <span style="font-weight:bold;">Depth:</span>
                                            <span class="meta_profile_depth">--</span>
                                            <span style="font-weight:bold;">Lat:</span>
                                            <span class="meta_profile_lat">--</span>
                                            <span style="font-weight:bold;">Lon:</span>
                                            <span class="meta_profile_lon">--</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="p-1 overflow-auto text-center">
                    <svg id="chart_post_med" class="chart" width="650" height="400"></svg>

                </div>
            </div>
            <div class="card-footer" style="font-size:0.5rem;">
                <span style="font-weight:bold;">Sample:</span>
                <span class="meta_sample_name">--</span>
                <span style="font-weight:bold;">UID:</span>
                <span class="meta_sample_uid">--</span>
                <span style="font-weight:bold;">Host</span>
                <span class="meta_sample_host">--</span>
                <span style="font-weight:bold;">Depth:</span>
                <span class="meta_sample_depth">--</span>
                <span style="font-weight:bold;">Lat:</span>
                <span class="meta_sample_lat">--</span>
                <span style="font-weight:bold;">Lon:</span>
                <span class="meta_sample_lon">--</span>

            </div>
        </div>

        <!--PROFILE SVG HOLDER-->
        <div class="card mb-3">
            <!--CARD HEADER-->
            <div class="card-header" data-toggle="collapse" data-target="#profile_svg_collapse">
                ITS2 type profiles
            </div>
            <!--CARD BODY-->
            <div class="card-body p-0 collapse show" id="profile_svg_collapse">
                <div class="bg-light p-2" >
                    <div class="d-flex">
                        <div class="btn-group btn-group-sm mr-auto" >
                            <button id="ProfileMEDRelDType" class="btn btn-light dtype-btn" data-data-type="profile" style="padding:2px 4px;font-size:0.7rem;border:1px solid lightgrey">relative</button>
                            <button id="ProfileMEDAbsDType" class="btn btn-primary dtype-btn" data-data-type="profile" style="padding:2px 4px;font-size:0.7rem;">absolute</button>
                            <div class="btn-group">
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="padding:2px 4px;font-size:0.7rem;">
                                   Sorted by:
                                </button>
                                <div class="dropdown-menu svg_sort_by" id="data_type_profile" style="padding:2px 4px;font-size:0.7rem;">
                                    <a class="dropdown-item" >sequencing depth</a>
                                    <a class="dropdown-item" >sequencing similarity</a>
                                    <a class="dropdown-item" >host</a>
                                    <a class="dropdown-item" >location</a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex viewer_link" data-toggle="modal" data-target="#seq-prof-modal">
                            <div class="">Open viewer</div>
                            <i class="material-icons">launch</i>
                        </div>
                    </div>
                </div>
                <div class="p-1 overflow-auto text-center">
                    <svg id="chart_profile" class="chart" width="650" height="400"></svg>
                </div>
            </div>
            <div class="card-footer" style="font-size:0.5rem;">
                <!--TODO Implement a divider and have sample on top
                and sequence or profile details below.-->
                <div class="pb-2" style="border-bottom:1px solid lightgrey;">
                    <span style="font-weight:bold;">Sample:</span>
                    <span class="meta_sample_name">--</span>
                    <span style="font-weight:bold;">UID:</span>
                    <span class="meta_sample_uid">--</span>
                    <span style="font-weight:bold;">Host</span>
                    <span class="meta_sample_host">--</span>
                    <span style="font-weight:bold;">Depth:</span>
                    <span class="meta_sample_depth">--</span>
                    <span style="font-weight:bold;">Lat:</span>
                    <span class="meta_sample_lat">--</span>
                    <span style="font-weight:bold;">Lon:</span>
                    <span class="meta_sample_lon">--</span>
                </div>
                <div class="pt-2">
                    <span style="font-weight:bold;">Profile:</span>
                    <span class="meta_profile_name">--</span>
                    <span style="font-weight:bold;">UID:</span>
                    <span class="meta_profile_uid">--</span>
                    <span style="font-weight:bold;">Host</span>
                    <span class="meta_profile_host">--</span>
                    <span style="font-weight:bold;">Depth:</span>
                    <span class="meta_profile_depth">--</span>
                    <span style="font-weight:bold;">Lat:</span>
                    <span class="meta_profile_lat">--</span>
                    <span style="font-weight:bold;">Lon:</span>
                    <span class="meta_profile_lon">--</span>
                </div>

            </div>
        </div>

        <!--PRE MED SVG HOLDER-->
        <div class="card mb-3">
            <!--CARD HEADER-->
            <div class="card-header" data-toggle="collapse" data-target="#pre_med_svg_collapse">
                Pre-MED ITS2 sequences <span style="font-size:0.5rem;">(rendering the pre-MED seqs may take a little time)</span>
            </div>
            <!--CARD BODY-->
            <div class="card-body p-0 collapse" id="pre_med_svg_collapse">
                <div class="bg-light p-2" >
                    <div class="btn-group btn-group-sm" >
                        <button id="PreMEDRelDType" class="btn btn-light dtype-btn" data-data-type="pre" style="padding:2px 4px;font-size:0.7rem;border:1px solid lightgrey">relative</button>
                        <button id="PreMEDAbsDType" class="btn btn-primary dtype-btn" data-data-type="pre" style="padding:2px 4px;font-size:0.7rem;">absolute</button>
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="padding:2px 4px;font-size:0.7rem;">
                               Sorted by:
                            </button>
                            <div class="dropdown-menu svg_sort_by" id="data_type_pre_med" style="padding:2px 4px;font-size:0.7rem;">
                                <a class="dropdown-item" >sequencing depth</a>
                                <a class="dropdown-item" >sequencing similarity</a>
                                <a class="dropdown-item" >host</a>
                                <a class="dropdown-item" >location</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-1 overflow-auto text-center">
                    <svg id="chart_pre_med" class="chart" width="650" height="400"></svg>
                </div>
            </div>
            <div class="card-footer" style="font-size:0.5rem;">
                <span style="font-weight:bold;">Sample:</span>
                <span class="meta_sample_name">--</span>
                <span style="font-weight:bold;">UID:</span>
                <span class="meta_sample_uid">--</span>
                <span style="font-weight:bold;">Host</span>
                <span class="meta_sample_host">--</span>
                <span style="font-weight:bold;">Depth:</span>
                <span class="meta_sample_depth">--</span>
                <span style="font-weight:bold;">Lat:</span>
                <span class="meta_sample_lat">--</span>
                <span style="font-weight:bold;">Lon:</span>
                <span class="meta_sample_lon">--</span>
            </div>
        </div>
    </div>

    <!--RHS-->
    <div class="col-md-5">

        <!--TODO make it so that there is an arrow and that the whole bar is clickable
        https://codepen.io/nhembram/pen/XKEJJp -->
        <!--CARDS-->
        <div class="card mb-3">
            <div class="card-header" data-toggle="collapse" data-target="#dataset_info_collapse">
                Dataset
            </div>

            <div class="card-body collapse show" id="dataset_info_collapse" style="font-size:0.8rem;">
                <div class="row " >
                    <dt class="col-sm-6">
                        <span class="float-right">Dataset Name:</span>
                    </dt>
                    <dd class="col-sm-6">
                        restrepo_20190918
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Dataset UID:</span>
                    </dt>
                    <dd class="col-sm-6">
                        343
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">First recieved:</span>
                    </dt>
                    <dd class="col-sm-6">
                        13 September, 2019
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right" style="width:100%;text-overflow:ellipsis;overflow:hidden;white-space: nowrap;">SymPortal Version (loading):</span>
                    </dt>
                    <dd class="col-sm-6">
                        V0.3.13
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">SymPortal version (analysis):</span>
                    </dt>
                    <dd class="col-sm-6">
                        V0.3.13
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Datasheet:</span>
                    </dt>
                    <dd class="col-sm-6" style="width:100%;text-overflow:ellipsis;overflow:hidden;white-space: nowrap;">
                        <a href="#home">datasheet_20190918.xlsx</a>
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Number of samples:</span>
                    </dt>
                    <dd class="col-sm-6">
                        604
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Sequencing accesion:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">PBA647382</a>
                    </dd>
                    <!--TODO can have popup on the anlysis that will show stats for that-->
                    <dt class="col-sm-6">
                        <span class="float-right">Analysis UID:</span>
                    </dt>
                    <dd class="col-sm-6">
                        604
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Analysis name:</span>
                    </dt>
                    <dd class="col-sm-6">
                        DBV_20190809
                    </dd>
                </div>
                <div class="d-flex justify-content-end">
                    <a href="#home">json dump</a>
                </div>
            </div>

        </div>
        <div class="card mb-3">
            <div class="card-header" data-toggle="collapse" data-target="#analysis_info_collapse">
                Analysis
            </div>
            <div class="card-body collapse" id="analysis_info_collapse" style="font-size:0.8rem;">
                <div class="row" >
                    <dt class="col-sm-6">
                        <span class="float-right">Analysis UID:</span>
                    </dt>
                    <dd class="col-sm-6">
                        604
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Analysis name:</span>
                    </dt>
                    <dd class="col-sm-6">
                        DBV_20190809
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">SymPortal version (analysis):</span>
                    </dt>
                    <dd class="col-sm-6">
                        V0.3.13
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Number of profiles:</span>
                    </dt>
                    <dd class="col-sm-6">
                        23
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Datasheet:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">datasheet_20190918.xlsx</a>
                    </dd>
                </div>
            </div>
        </div>
        <div class="card mb-3">
            <div class="card-header" data-toggle="collapse" data-target="#resource_download_info_collapse">
                Resource download
            </div>
            <div class="card-body collapse" id="resource_download_info_collapse" style="font-size:0.8rem;">
                <div class="row" >
                    <dt class="col-sm-6">
                        <span class="float-right">Pre-MED seq count table:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">12.2334234.234245345.longlonglonglong.asdf.name.txt</a>
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Post-MED seq count table::</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">12.2334234.234245345.longlonglonglong.asdf.name.txt</a>
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">ITS2 type profile count table:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">12.2334234.234245345.longlonglonglong.asdf.name.txt</a>
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Between sample distances:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">12.2334234.234245345.longlonglonglong.asdf.name.txt</a>
                    </dd>
                    <dt class="col-sm-6">
                        <span class="float-right">Between profile distances:</span>
                    </dt>
                    <dd class="col-sm-6">
                        <a href="#home">12.2334234.234245345.longlonglonglong.asdf.name.txt</a>
                    </dd>
                </div>
            <div class="d-flex justify-content-end">
                <a href="#home">Download all</a>
            </div>
          </div>

        </div>
        <!--MAP-->
        <span style="font-size:0.5rem;font-weight:bold;">Click markers for site details</span>
        <div id="map" style="height:400px;border:1px solid black;"></div>

    </div>
    </div>


<script src="data/seqs.absolute.js"></script>

<script src="html_data/rect_array_preMED_by_sample.js"></script>
<script src="html_data/rect_array_profile_by_sample.js"></script>
<script src="html_data/rect_array_postMED_by_sample.js"></script>

<!--TODO to enable the marker clustering we will need to have the library on the server-->
<!--<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">-->
<script src="play_around.js"></script>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkCzzx0s24NKJ3qGS-4xVBwzMGSI4thNA"></script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>